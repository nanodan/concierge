/* Reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* CSS Variables - Non-color (timing, spacing, etc.) */
:root {
  --transition-fast: 0.15s ease;
  --transition-smooth: 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  --spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
  --smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-top: env(safe-area-inset-top, 0px);
  /* Typography */
  --font-display: 'Playfair Display', Georgia, serif;
  --font-body: 'Source Sans 3', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* Simplified animations on touch devices for performance */
@media (pointer: coarse) {
  :root {
    --transition-smooth: 0.2s ease;
    --spring: ease-out;
  }
}

/* Honor user accessibility preference */
@media (prefers-reduced-motion: reduce) {
  :root {
    --transition-fast: 0s;
    --transition-smooth: 0s;
  }
}

/* Body styles */
html, body {
  height: 100%;
  height: 100dvh;
  overflow: hidden;
  overscroll-behavior: contain;
  font-family: var(--font-body);
  background: var(--bg);
  color: var(--text);
  -webkit-text-size-adjust: 100%;
}

/* Smooth theme transitions */
html.theme-transitioning,
html.theme-transitioning *,
html.theme-transitioning *::before,
html.theme-transitioning *::after {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease !important;
}

/* Subtle noise texture overlay for depth */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.015;
  pointer-events: none;
  z-index: 10000;
  mix-blend-mode: overlay;
}

/* Bell ring animation */
@keyframes bell-ring {
  0% { transform: rotate(0deg); }
  10% { transform: rotate(14deg); }
  20% { transform: rotate(-12deg); }
  30% { transform: rotate(10deg); }
  40% { transform: rotate(-8deg); }
  50% { transform: rotate(6deg); }
  60% { transform: rotate(-4deg); }
  70% { transform: rotate(2deg); }
  80% { transform: rotate(-1deg); }
  100% { transform: rotate(0deg); }
}

.bell-ringing {
  animation: bell-ring 0.6s ease-in-out;
  transform-origin: top center;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 4px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb, var(--white-alpha-10));
  border-radius: 4px;
}

/* Syntax highlighting - uses theme variables */
.hljs { background: transparent; }
.hljs-keyword, .hljs-selector-tag { color: var(--syntax-keyword); }
.hljs-string, .hljs-addition { color: var(--syntax-string); }
.hljs-number, .hljs-literal { color: var(--syntax-number); }
.hljs-comment, .hljs-deletion { color: var(--syntax-comment); }
.hljs-function, .hljs-title { color: var(--syntax-function); }
.hljs-built_in { color: var(--syntax-type); }
.hljs-type, .hljs-class .hljs-title { color: var(--syntax-type); }
.hljs-attr, .hljs-variable { color: var(--syntax-variable); }
.hljs-params { color: var(--text); }
.hljs-meta, .hljs-meta .hljs-keyword { color: var(--syntax-function); }
.hljs-regexp { color: var(--syntax-function); }
.hljs-symbol, .hljs-bullet { color: var(--syntax-keyword); }
.hljs-property { color: var(--syntax-function); }
.hljs-operator { color: var(--syntax-operator); }
.hljs-punctuation { color: var(--text-secondary); }
